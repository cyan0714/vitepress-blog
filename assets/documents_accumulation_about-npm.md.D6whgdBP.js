import{_ as i,c as a,o as n,b1 as t}from"./chunks/framework.CBNrOPsJ.js";const c=JSON.parse('{"title":"npm 使用指南","description":"","frontmatter":{},"headers":[],"relativePath":"documents/accumulation/about-npm.md","filePath":"documents/accumulation/about-npm.md","lastUpdated":1749020412000}'),e={name:"documents/accumulation/about-npm.md"};function l(h,s,p,k,o,r){return n(),a("div",null,s[0]||(s[0]=[t(`<h1 id="npm-使用指南" tabindex="-1">npm 使用指南 <a class="header-anchor" href="#npm-使用指南" aria-label="Permalink to &quot;npm 使用指南&quot;">​</a></h1><h2 id="📦-基础配置" tabindex="-1">📦 基础配置 <a class="header-anchor" href="#📦-基础配置" aria-label="Permalink to &quot;📦 基础配置&quot;">​</a></h2><h3 id="镜像源管理" tabindex="-1">镜像源管理 <a class="header-anchor" href="#镜像源管理" aria-label="Permalink to &quot;镜像源管理&quot;">​</a></h3><h4 id="查看当前源" tabindex="-1">查看当前源 <a class="header-anchor" href="#查看当前源" aria-label="Permalink to &quot;查看当前源&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 查看 npm 当前镜像源</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 查看 yarn 当前镜像源</span></span></code></pre></div><h4 id="设置镜像源" tabindex="-1">设置镜像源 <a class="header-anchor" href="#设置镜像源" aria-label="Permalink to &quot;设置镜像源&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># npm 镜像源设置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://registry.npmjs.org/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 官方源</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://registry.npm.taobao.org/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 淘宝镜像(旧)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://registry.npmmirror.com/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 淘宝镜像(新)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># yarn 镜像源设置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://registry.yarnpkg.com/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 官方源</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://registry.npm.taobao.org/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 淘宝镜像源</span></span></code></pre></div><h2 id="🔧-常见问题解决" tabindex="-1">🔧 常见问题解决 <a class="header-anchor" href="#🔧-常见问题解决" aria-label="Permalink to &quot;🔧 常见问题解决&quot;">​</a></h2><h3 id="ssl-证书过期问题" tabindex="-1">SSL 证书过期问题 <a class="header-anchor" href="#ssl-证书过期问题" aria-label="Permalink to &quot;SSL 证书过期问题&quot;">​</a></h3><p>当遇到 <code>certificate has expired</code> 错误时：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> strict-ssl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span></code></pre></div><h3 id="electron-安装失败解决方案" tabindex="-1">Electron 安装失败解决方案 <a class="header-anchor" href="#electron-安装失败解决方案" aria-label="Permalink to &quot;Electron 安装失败解决方案&quot;">​</a></h3><ol><li><p>设置镜像源为淘宝镜像：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://registry.npm.taobao.org/</span></span></code></pre></div></li><li><p>配置本地 <code>.npmrc</code> 文件（通常在 <code>C:\\Users\\pc</code> 目录下）：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ELECTRON_MIRROR=&quot;https://npm.taobao.org/mirrors/electron/&quot;</span></span></code></pre></div></li></ol><h3 id="node-sass-环境不支持问题" tabindex="-1">Node Sass 环境不支持问题 <a class="header-anchor" href="#node-sass-环境不支持问题" aria-label="Permalink to &quot;Node Sass 环境不支持问题&quot;">​</a></h3><p>当遇到 <code>Node Sass does not yet support your current environment</code> 错误时：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node-sass</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save-dev</span></span></code></pre></div><blockquote><p>直接将 node-sass 升级到最新版本即可解决</p></blockquote><h3 id="node-gyp-运行错误解决方案" tabindex="-1">node-gyp 运行错误解决方案 <a class="header-anchor" href="#node-gyp-运行错误解决方案" aria-label="Permalink to &quot;node-gyp 运行错误解决方案&quot;">​</a></h3><p>当遇到 <code>gyp ERR! node-gyp -v v3.8.0</code> 错误时，有以下解决方案：</p><ol><li><strong>方案一</strong>：将 Python 降为 3 以下版本（未验证）</li><li><strong>方案二</strong>：删除 node-sass，改用 sass（推荐，已验证）</li></ol><h2 id="🚀-高级功能" tabindex="-1">🚀 高级功能 <a class="header-anchor" href="#🚀-高级功能" aria-label="Permalink to &quot;🚀 高级功能&quot;">​</a></h2><h3 id="npm-link-本地开发利器" tabindex="-1">npm link - 本地开发利器 <a class="header-anchor" href="#npm-link-本地开发利器" aria-label="Permalink to &quot;npm link - 本地开发利器&quot;">​</a></h3><p>用于在本地开发时避免频繁发布更新，实现项目间的模块共享。</p><p><strong>使用场景</strong>：项目 A 开发了一个模块，项目 B 需要使用该模块</p><p><strong>操作步骤</strong>：</p><ol><li><p>在项目 A 中执行：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link</span></span></code></pre></div><blockquote><p>执行后会在全局 node_modules 中生成项目 A 的软链接</p></blockquote></li><li><p>在项目 B 中执行：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> A</span></span></code></pre></div><blockquote><p>执行后会在项目 B 的 node_modules 中生成指向项目 A 的软链接</p></blockquote></li></ol><p><strong>效果</strong>：修改项目 A 的代码后，项目 B 会自动更新</p><h3 id="自动发布带-changelog-的-npm-包" tabindex="-1">自动发布带 changelog 的 npm 包 <a class="header-anchor" href="#自动发布带-changelog-的-npm-包" aria-label="Permalink to &quot;自动发布带 changelog 的 npm 包&quot;">​</a></h3><p>使用 <code>release-it</code> 工具实现自动化发布流程。</p><h4 id="配置步骤" tabindex="-1">配置步骤 <a class="header-anchor" href="#配置步骤" aria-label="Permalink to &quot;配置步骤&quot;">​</a></h4><ol><li><p><strong>初始化 release-it</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release-it</span></span></code></pre></div><blockquote><p>会在 package.json 的 scripts 中添加 release 脚本，并安装 release-it 到 devDependencies</p></blockquote></li><li><p><strong>创建配置文件</strong> <code>.release-it.json</code>：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;github&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;release&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;git&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;commitMessage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;release: v\${version}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;npm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;publish&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;hooks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;after:bump&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;echo 更新版本成功&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;plugins&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@release-it/conventional-changelog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;preset&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;angular&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;infile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CHANGELOG.md&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p><strong>安装 changelog 插件</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @release-it/conventional-changelog</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span></span></code></pre></div></li><li><p><strong>执行发布</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        # 自动版本号</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --release-as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x.x.x</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 手动指定版本号</span></span></code></pre></div></li></ol><blockquote><p><strong>注意</strong>：如需在 CHANGELOG.md 中显示提交记录，提交信息应以 <code>feat</code>、<code>chore</code> 等开头。建议安装 <code>git-cz</code> 并使用 <code>npm run commit</code> 进行规范化提交。</p></blockquote><h2 id="📋-包管理" tabindex="-1">📋 包管理 <a class="header-anchor" href="#📋-包管理" aria-label="Permalink to &quot;📋 包管理&quot;">​</a></h2><h3 id="取消-npm-包发布" tabindex="-1">取消 npm 包发布 <a class="header-anchor" href="#取消-npm-包发布" aria-label="Permalink to &quot;取消 npm 包发布&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unpublish</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package-name@x.x.x</span></span></code></pre></div><h3 id="发布到公司内网仓库" tabindex="-1">发布到公司内网仓库 <a class="header-anchor" href="#发布到公司内网仓库" aria-label="Permalink to &quot;发布到公司内网仓库&quot;">​</a></h3><h4 id="方式一-本地打包上传" tabindex="-1">方式一：本地打包上传 <a class="header-anchor" href="#方式一-本地打包上传" aria-label="Permalink to &quot;方式一：本地打包上传&quot;">​</a></h4><ol><li><p>发布成功后安装到本地：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package-name</span></span></code></pre></div></li><li><p>使用 tar 命令打包：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -czvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> archive.tgz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> folder_name</span></span></code></pre></div><p><strong>参数说明</strong>：</p><ul><li><code>c</code>: 创建新的压缩文件</li><li><code>z</code>: 使用 gzip 压缩</li><li><code>v</code>: 显示详细压缩过程</li><li><code>f</code>: 指定压缩文件名称</li></ul></li><li><p>将 tgz 包上传到公司源</p></li></ol><h4 id="方式二-直接下载上传" tabindex="-1">方式二：直接下载上传 <a class="header-anchor" href="#方式二-直接下载上传" aria-label="Permalink to &quot;方式二：直接下载上传&quot;">​</a></h4><ol><li>直接从 npm 镜像源下载 tgz 包</li><li>将包上传到公司源</li></ol><blockquote><p><strong>提示</strong>：方式二可能会遇到阿里云镜像源同步不及时的问题，如果需要立即使用，建议采用方式一。</p></blockquote>`,41)]))}const g=i(e,[["render",l]]);export{c as __pageData,g as default};
