## 在 vue 中使用 v-for 后为什么要加 key
key 的作用主要是高效更新虚拟 dom，同时保持组件内部状态的准确性。

如果不加 key 或者 key 为 index，当往列表最前面新增一个新项时，原来的第一项变成了第二项，原来的第一项的 index 由0变成了1，第二项的index由1变成了2，vue 就误认为每一项都发生了变化，进而导致不必要的渲染。

如果加了 key，vue 就会通过新旧节点的对比，只会更新变化的那一项，而不是全部更新。


## vue 虚拟 dom 是如何优化性能的？
1. 批量异步更新
将多次数据变更合并到一次视图更新（通过事件循环队列）。

2. 高效 Diff 算法
· 同层对比：仅比较同层级节点，不跨层级，复杂度 O(n)
· Key 优化：用 key 标识元素，复用相同节点，减少列表重新渲染

3. 减少直接 DOM 操作
将多次真实 DOM 修改合并为一次更新，减少浏览器重绘和回流的性能消耗。

4. 组件级更新
每个组件独立维护虚拟 DOM，数据变化时仅重新渲染受影响组件。

5. 跨平台能力
虚拟 DOM 抽象了渲染过程，使非浏览器环境（如小程序、Native）也能复用优化逻辑。

**本质：用 JS 计算成本换取真实 DOM 操作成本，在复杂场景下实现性能与可维护性的平衡。**


## 数据变更后，dom 的更新顺序是怎样的?
1. 数据变更 → 被加入异步队列（批量异步更新）

2. 队列触发 → 生成新的虚拟 DOM

3. Diff 计算 → 找出最小修改（减少 DOM 操作）

4. 统一 patch → 真实 DOM 更新


## vue-router 中有哪些路由守卫，有什么用？
1. 全局前置守卫 (beforeEach)：在路由跳转前执行，用于权限验证、登录检查等。

2. 全局解析守卫 (beforeResolve)：在导航被确认前执行，适合确保异步数据加载完成。

3. 全局后置钩子 (afterEach)：在路由跳转完成后执行，适合日志记录、页面分析等。

4. 路由独享守卫 (beforeEnter)：在进入特定路由前执行，配置在路由定义中。

5. 组件内守卫：
- beforeRouteEnter：进入组件前执行，无法访问 this。
- beforeRouteUpdate：组件复用时执行，如路由参数变化。
- beforeRouteLeave：离开组件前执行，适合防止未保存数据丢失。

作用：控制导航行为、权限验证、数据预加载、日志记录等。


## 响应式原理
Vue2 的响应式原理是通过`Object.defineProperty`方法，为对象的每个属性添加 getter 和 setter，实现数据劫持。当访问属性时，getter 收集依赖的Watcher；当属性值改变时，setter 通知相关的 Watcher 更新视图，从而实现数据变化驱动视图更新。

局限性：给对象添加属性不是响应式的，通过下标修改某个数组值也不是响应式的，vue2 中数组的 push、pop、splice 为响应式是因为 vue 内部做了处理。

为了解决上述问题，vue3 通过 Proxy 来实现数据的响应式，Proxy 代理的是整个对象，所有不会出现上方的局限性


## vue2 组件通信的方式
1. 父子
props、emit、parent、children、ref

2. 兄弟
eventbus、vuex

3. 跨层级
provide、inject、$attrs、$lisenter


## vuex 有哪些常用的方法，应用场景是什么？
1. state：存储应用状态数据。
场景：全局共享数据，如用户信息、主题设置等。

2. getters：从 state 中派生出计算属性。
场景：获取处理后的状态数据，如过滤列表、计算总数等。

3. mutations：同步修改 state。
场景：直接更新状态，如修改用户信息、切换主题等。

4. actions：提交 mutations，支持异步操作。
场景：处理异步逻辑，如请求数据、定时任务等。

5. modules：将 store 分割成模块。
场景：大型项目中分模块管理状态。

核心作用：集中管理应用状态，解决组件间数据共享问题。


## 给你一个页面，你要怎么考虑拆分成组件
1. 功能独立性
将具有独立功能的部分拆成组件，比如头部、导航、表单、列表等。

2. 可复用性
如果某部分可能在多个页面或场景中重复使用，就拆成组件，比如按钮、卡片、模态框等。

3. 复杂度管理
将复杂部分拆成更小的组件，便于维护和测试，比如表格中的每一行、表单中的输入项等。

4. 数据流清晰
确保组件之间的数据传递清晰，避免过度依赖父组件或全局状态。

5. UI 结构
根据 UI 层级拆分，比如将页面分为头部、主体、底部，主体再拆分为侧边栏和内容区等。
